# UI Spec — Iteration A

## Предупреждение при выборе темы
- Перед подтверждением random-темы пользователь должен увидеть предупреждение:
  "После выбора тему изменить нельзя."
- Подтверждение должно быть явным (кнопка или подтверждающий шаг).

## Таймер и дедлайн
- После фиксации темы пользователь всегда видит:
  - дату дедлайна
  - количество оставшихся дней
- Таймер отображается на финальном экране и при повторном заходе.

## Ограничения
- Не менять бизнес-логику и API.
- Не добавлять анимации и визуальные улучшения.
- Изменения касаются только UI и текстов.



## Random Wheel (Iteration B)

Цель: при random-выборе тема должна появляться через “колесо” (как iOS picker / hearthstone opponent searching).

Требования:
- Колесо — визуальный эффект, источник истины по теме остаётся backend (/api/spin).
- По нажатию "Выбрать тему":
  1) запускается анимация 1–2 секунды (псевдо-случайная прокрутка списка),
  2) затем показывается тема, полученная с backend, и фиксируется как обычно.
- До конца анимации пользователь не видит финальную тему (чтобы было ощущение “выпало”).
- Никаких изменений API и бизнес-логики.
- Если backend вернул ошибку (темы закончились / 409), колесо не “выдаёт” тему, а показывается ошибка.


## UI Upgrade (Iteration C)

Цель: сделать современный корпоративный UI (чистый, аккуратный), без изменения функционала.

Требования:
- Единый layout: центрированный контейнер, ограничение ширины, нормальные поля.
- Карточки для блоков (фон, скругления, тень/бордер).
- Аккуратная типографика (заголовки/подзаголовки/текст).
- Кнопки: primary/secondary, hover/focus, disabled, loading.
- Формы: понятные label, подсказки, ошибки.
- Страницы должны выглядеть “продуктово”, но без попытки копировать конкретные бренд-ассеты.
- Не менять API и бизнес-логику. Не ломать Wheel.

Iteration C1: Application Layout.

Задача: переделать базовый layout приложения, чтобы сервис выглядел как полноценный web-app, а не как форма в маленьком окошке.

Требования:
- Приложение должно использовать большую часть экрана.
- Контент центрирован, но максимальная ширина ~900–1100px.
- Убрать ощущение “одной карточки на весь сервис”.
- Использовать нейтральный фон и контейнеры внутри.
- Не менять бизнес-логику, тексты и экраны.
- Все существующие экраны должны автоматически выглядеть лучше за счёт layout-а.

Ограничения:
- Работать только с layout-файлом и общими стилями.
- Не редактировать отдельные страницы.

Формат ответа:
- Коротко опиши, что меняется в layout.
- Затем код layout-файла целиком.


## User Text Structure (Release E)

Цель: текст, связанный с идеей, должен быть структурирован и легко читаем.

Требования:
- На пользовательском экране идея должна отображаться в виде отдельных блоков:
  1) "Ваша тема" — короткое название или первая строка
  2) "Детали реализации" — основной текст задачи
  3) "Комментарий модератора" — если есть
- Каждый блок оформляется как отдельная секция внутри карточки.
- Блоки должны иметь визуальное различие (заголовок, фон, отступы).
- Если комментария модератора нет — блок не показывается.
- Не менять бизнес-логику и API.



## AI-Tech Visual (Release F)

Цель: современный “богатый” технологичный UI для AI-подразделения, в корпоративной эстетике.

Стиль:
- Светлый технологичный фон (градиент/soft pattern), без кислотных цветов.
- Акцентный цвет: один основной (зелено-сине-голубой спектр), остальные нейтральные.
- Карточки: мягкие тени/бордер, больше “воздуха”, аккуратные скругления.
- Заголовки: сильнее иерархия (title > subtitle > body).
- Бейджи статусов: pending/approved/rejected и “Тема закреплена” — выглядят как chips.
- Кнопки: современный вид (primary с легким градиентом/shine, secondary спокойная, destructive аккуратная).
- Формы: textarea/input с хорошим focus-ring, placeholder, helper text.
- Микро-анимации: только лёгкие hover/active transition (без тяжёлых motion-сцен).

Ограничения:
- Не менять бизнес-логику и API.
- Не ломать Wheel.
- Не добавлять новые сценарии.


## Visual Reference (Release F3)

Основной визуальный референс:
https://aij.ru/en

Ожидаемый характер UI:
- Современный AI-first интерфейс
- Светлый фон с мягкими градиентами
- Аккуратные glass/soft-card эффекты
- Чёткая типографика, ощущение “технологического продукта”
- Не маркетинговый лендинг, а интерфейс сервиса

Важно:
- Это референс по стилю и настроению, а не по структуре страниц.
- Не копировать сайт буквально.
- Сохранить текущую компоновку и UX.

## Visual Constraints (Important)

- Не использовать эмодзи в UI (кнопки, заголовки, статусы, подсказки).
- Вместо эмодзи использовать:
  - иконки (если уже есть),
  - форму,
  - цвет,
  - типографику.
- Цветовая палитра:
  - 1 основной акцентный цвет;
  - нейтральные оттенки для текста, фона, бордеров;
  - минимальное количество разноцветного текста.
- Формы и текстовые блоки не должны выглядеть “радугой”.
- Визуальный приоритет достигается иерархией, а не количеством цветов.


## Design Primitives (Release F6)

Использовать следующие визуальные приёмы:

1) Cards:
- Лёгкий glass / frosted эффект:
  - полупрозрачный фон,
  - тонкий border,
  - мягкая тень,
  - ощущение слоя над фоном.
- Карточки должны явно отличаться от фона.

2) Background:
- Многоуровневый светлый фон:
  - мягкие градиенты,
  - ощущение глубины,
  - не однотонный белый.

3) Typography:
- Усилить заголовки (size, weight).
- Больше воздуха между секциями.
- Тело текста спокойное, вторичное.

4) Loader:
- Не использовать дефолтные spinner'ы.
- Loader должен быть:
  - минималистичным,
  - технологичным,
  - согласованным со стилем приложения.
- Допустим простой кастомный loader (линия, дуга, pulse).

Важно:
- Это не лендинг.
- Все приёмы должны быть сдержанными и корпоративными.



## Typography & Color System (Release F8)

Typography:
- Использовать современный UI-шрифт (предпочтительно Inter).
- Размеры:
  - Body text: 16–18px
  - Secondary / labels: 14–15px
  - Section headers: 18–20px
  - Main headings: 28–32px
- Текст внутри форм не должен быть мелким.

Color system (AI-tech palette):
- Primary: #0B1C2D
- Primary accent: #0F3C6E
- Secondary accent (teal): #1FC7B6
- Secondary soft: #6FE3D6

Background:
- Dark base: #071622
- Gradient layers: #0A1E30 → #0E2F4F

Cards / glass:
- Base: rgba(255, 255, 255, 0.08)
- Border: rgba(255, 255, 255, 0.12)

Text:
- Primary: #EAF4FF
- Secondary: #A9C1D9
- Muted: #7D96AF

Важно:
- Использовать ограниченную палитру.
- Цвет — для иерархии, а не для украшения.



## Final UI Fixes (Release F10)

Typography:
- Использовать один шрифт по всему приложению.
- Предпочтительно: Inter.
- Запрещены serif и декоративные шрифты.
- Заголовки:
  - font-weight: 600–700
  - letter-spacing: -0.01em
- Body text:
  - font-size: не менее 16px
  - line-height: 1.5–1.6

Spacing:
- Уменьшить избыточные vertical paddings.
- Группировать связанные элементы визуально.
- Воздух должен помогать иерархии, а не размывать её.

Warnings / confirmations:
- Не использовать ярко-жёлтые alert-цвета.
- Для предупреждений использовать:
  - secondary accent (teal/cyan),
  - или приглушённый orange,
  - или нейтральную карточку с бордером.
- Тон: спокойное подтверждение, не “опасность”.


Release F11: Fix typography hard.

Задача:
Гарантированно исправить использование шрифта по всему приложению.

Требования:
1) Использовать Inter как единственный UI-шрифт.
2) Подключить Inter корректно (предпочтительно через next/font/google).
3) Убедиться, что:
   - нет serif fallback,
   - font-family применяется ко всем элементам (body, inputs, labels, headings).
4) Исправить Tailwind config, если используется, чтобы font-sans = Inter.
5) После правки браузер не должен использовать Times New Roman / serif ни в одном месте.

Ограничения:
- Не менять цвета, layout, spacing, UI.
- Только шрифт и его применение.

Формат:
1) Какие файлы меняешь.
2) Код файлов целиком.


## UI Improvements (Latest iteration)

### Визуальное разделение режимов выбора темы
Задача: Разделить по цвету кнопки "Случайная тема" и "Своя тема" для лучшего UX.

Решение:
- "Случайная тема" — градиент teal/cyan (#1FC7B6 → #6FE3D6)
- "Своя тема" — градиент blue (#0F3C6E → #1A5A9E)
- Цвета остаются в рамках AI-tech палитры

### Всплывающие подсказки для режимов
Задача: Добавить пояснение каждого режима через tooltip при наведении на иконку "?".

Решение:
- Добавлена иконка "?" рядом с каждой кнопкой
- При наведении показывается текст:
  - Случайная тема: "Получите готовую тему для проекта. Система выберет задачу из пула, подходящую вашему уровню подготовки. Таймер на 14 дней начнётся сразу после выбора."
  - Своя тема: "Предложите свою идею для проекта. Ваша идея будет рассмотрена администратором (модерация 1-2 рабочих дня). Таймер начнётся после утверждения."

### Информация о таймере
Задача: Чётко указать, когда стартует таймер для каждого сценария.

Решение:
- В предупреждении random добавлен текст: "Таймер на 14 дней начнётся сразу после выбора темы."
- В подсказках к кнопкам указано, когда начинается таймер для каждого режима

### Полная тема на колесе
Задача: Показывать полную тему после выбора на колесе, а не только заголовок.

Решение:
- TopicWheel теперь показывает весь текст темы (title + description + acceptance_criteria)
- Финальная тема отображается в скроллируемом контейнере с border и фоном
- Кнопка "Узнать подробности" заменена на "Закрепить тему"

### Текст модерации
Задача: Убрать упоминание о "уведомлении", указать реальные сроки модерации.

Решение:
- Старый текст: "Ваша идея отправлена на модерацию администратору. Ожидайте решения. Вы получите уведомление после проверки."
- Новый текст: "Ваша идея отправлена на модерацию администратору. Модерация занимает 1-2 рабочих дня. Вы можете проверить статус на этой странице в любое время."

### Логика таймера для own-темы
Задача: Таймер должен начинаться с момента, когда пользователь видит утверждение, а не с момента утверждения модератором.

Решение:
- В `/api/admin/submissions/[id]/approve` не устанавливаются chosenAt и deadlineAt
- В `/api/me` при первом запросе после утверждения темы устанавливаются chosenAt и deadlineAt
- Это гарантирует, что таймер на 14 дней начнётся только после того, как пользователь увидит утверждённую тему

### Контрастность текста отклонения
Задача: Улучшить читаемость комментария модератора при отклонении (красное на красном).

Решение:
- error-box фон изменён на более прозрачный (rgba(239, 68, 68, 0.12))
- Заголовок h3 теперь #fecaca (светло-красный)
- Текст p теперь var(--color-text-primary) (основной цвет текста, белый)
- Значительно улучшена читаемость
